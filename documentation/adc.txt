V		T, oC
2.5		-24
2.02	0
1.02	50
0.02	100

Интерполяционная прямая:
T, oC = -50 * V + 101

Допустим, измерили напряжение на выходе датчика температуры (PB1) относительно земли (GND)
и оно составило 1.34 В. Соответственно, температура будет равна: 34 oC

У АЦП есть два референсных напряжения: Vref+ и Vref-
АЦП выполняет преобразование в диапазоне от Vref- до Vref+

dV = Vref+ - Vref-,
где dV -- диапазон преобразования

У АЦП есть определенное количество уровней преобразования
Обычно говорят об N-битных АЦП. Тогда, количество уровней L равно:
L = pow(2, N),
т.е. значения от 0   до   pow(2, N) - 1

После преобразования, мы получаем уровень ADCVAL равный
ADCVAL =  Vin * ((pow(2, N) - 1 + 1/2) / dV) = Vin * (pow(2, N) - 1/2) / (Vref+ - Vref-)
обратная
Vin = ADCVAL / ((pow(2, N) - 1/2) / (Vref+ - Vref-))   =>

Vin = ADCVAL * (Vref+ - Vref-) / (pow(2, N) - 1/2)

где 1/2 это нотация округления. Показывает, что мы можем округлить вверх (принимая как +1)
или вниз (принимая как -1), или по математическим правилам, принимая как 0.5.

В идеале, Vref- и Vref+ должны иметь напряжения, равные соответственно минимально и
максимально допустимому значению входного сигнала.


Допустим, входной сигнал может меняться от 0 до 3.3 В. Наш МК запитан от 3.3 В и Vref- подключен
к земле и мы используем 12-битный АЦП. Получаем частный случай:
ADCVAL = (pow(2, 12) - 1/2) * Vin / (3.3 - 0)  =>
ADCVAL = (4096 - 1/2) * Vin / (3.3 - 0)= (4096 - 1/2) * Vin / 3.3
принимаем округление вниз. получаем
ADCVAL = int(4095 * Vin / 3.3)

Например, на вход АЦП в такой конфигурации подали напряжение 1.5 В. Получим результат преобразования:
ADCVAL = int(4095 * 1.5 / 3.3) = 1861

И, зная результат преобразования можно всегда найти исходное значение напряжения (значение исходного сигнала).
Например, получили результат преобразования 40. Искомое значение напряжения (в той же конфигурации) будет:
V = 40 * 3.3 / 4095 = 0.032 В





